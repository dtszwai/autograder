import{R as o,P as t,f as u,h as s,r as m,V as c,i as d,j as l,G as h,O as T,k as n}from"./canvasApi-B3XcU1Pv.js";chrome.runtime.onInstalled.addListener(e=>{e.reason===chrome.runtime.OnInstalledReason.INSTALL&&chrome.runtime.openOptionsPage()});chrome.alarms.create(o,{periodInMinutes:30});chrome.alarms.create(t,{periodInMinutes:.5});chrome.alarms.onAlarm.addListener(async e=>{switch(e.name){case o:await m();break;case t:await u(),chrome.runtime.sendMessage({type:s});break;default:console.warn("Unknown alarm:",e)}});let i="";function k(e,A,a){return(async()=>{switch(e.type){case n:await m(),chrome.runtime.sendMessage({type:n}),a(!0);break;case t:await u(),chrome.runtime.sendMessage({type:s}),a({success:!0});break;case T:i=e.payload,chrome.runtime.openOptionsPage(),a({success:!0});break;case h:a(i);break;case c:const r=await d(e.payload);if(!r){a({success:!1,error:"Task not found"});break}chrome.runtime.sendMessage({type:c,payload:r}),r.isViewed=!0,await l(r.id,r),a({success:!0});break;case s:chrome.runtime.sendMessage({type:s}),a({success:!0});break;default:a({success:!1,error:"Unknown message type"})}})(),!0}chrome.runtime.onMessage.addListener(k);
